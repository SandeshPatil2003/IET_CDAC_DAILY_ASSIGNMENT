package com.j.service;

import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.List;
import java.util.Scanner;

import com.j.beans.Product;
import com.j.dao.ProductDao;
import com.j.dao.ProductDaoImpl;

public class ProductServiceImpl implements ProductService {
	
	ProductDao pdao = new ProductDaoImpl();

	@Override
	public boolean addProduct(Scanner sc) {
		
		
		
		System.out.println("ENTER NAME	:" );
		String pname = sc.next();
		
		System.out.println("ENTER QUANTIY	:" );
		int qty = sc.nextInt();
		
		System.out.println("ENTER PRICE	:" );
		double price = sc.nextDouble();
		
		System.out.println("ENTER MFGDATE:  (dd/MM/yyyy) " );
		String date = sc.next();
		
		DateTimeFormatter dt = DateTimeFormatter.ofPattern("dd/MM/yyyy");
		
		LocalDate mfgdate = LocalDate.parse(date,dt);
		
		Product p = new Product(pname,qty,price,mfgdate);
		
		
		
		
		
		return pdao.addProduct(p);
	}

	@Override
	public List<Product> displayALL() {
		
		return pdao.displayALL();
	}

	@Override
	public Product findById(int pid) {
		
		return pdao.findById(pid);
	}

	@Override
	public boolean editById(int pid,Scanner sc) {
		
		Product p = findById(pid);
		
		if(p!=null)
		{
			System.out.println("Enter changed");
			
			System.out.println("ENTER NAME	:" );
			String pname = sc.next();
			
			System.out.println("ENTER QUANTIY	:" );
			int qty = sc.nextInt();
			
			System.out.println("ENTER PRICE	:" );
			double price = sc.nextDouble();
			
			System.out.println("ENTER MFGDATE:  (dd/MM/yyyy) " );
			String date = sc.next();
			
			DateTimeFormatter dt = DateTimeFormatter.ofPattern("dd/MM/yyyy");
			
			LocalDate mfgdate = LocalDate.parse(date,dt);
			
			Product p1 = new Product(pid,pname,qty,price,mfgdate);
			
			return pdao.updateProduct(p1);
			
		}
	
		
		
		return false;
	}

	@Override
	public boolean deleteById(int pid) {
		
		return pdao.delete;
	}

}
